// Code generated by protoc-gen-gohttp. DO NOT EDIT.
// source: contracts/service.proto

package contracts

import (
	"context"
	"github.com/gin-gonic/gin"
	"github.com/mailru/easyjson"
)

// TaskService
type TaskServiceHTTPServer interface {
	// - Commands
	Create(context.Context, *CreateTaskCommand) (*TaskEvent, error)
	Delete(context.Context, *DeleteTaskCommand) (*TaskEvent, error)
	Update(context.Context, *UpdateTaskCommand) (*TaskEvent, error)
	// Update existing task state to progress
	Progress(context.Context, *ProgressTaskCommand) (*TaskEvent, error)
	// Update existing task to complete
	Complete(context.Context, *CompleteTaskCommand) (*TaskEvent, error)
	// Query for existing tasks
	ListQuery(context.Context, *ListTasksQuery) (*TaskEntity, error)
}
type taskService struct {
	app TaskServiceHTTPServer
}

// creates a new task
func (p *taskService) create(ctx *gin.Context) {
	body := CreateTaskCommand{}
	easyjson.UnmarshalFromReader(ctx.Request.Body, &body)
	res, err := p.app.Create(
		ctx,
		&body,
	)
	if err != nil {
		return
	}
	ctx.Status(200)
	easyjson.MarshalToHTTPResponseWriter(
		res,
		ctx.Writer,
	)
}

// deletes an existing task
func (p *taskService) delete(ctx *gin.Context) {
	body := DeleteTaskCommand{}
	easyjson.UnmarshalFromReader(ctx.Request.Body, &body)
	res, err := p.app.Delete(
		ctx,
		&body,
	)
	if err != nil {
		return
	}
	ctx.Status(200)
	easyjson.MarshalToHTTPResponseWriter(
		res,
		ctx.Writer,
	)
}

// updates an existing task
func (p *taskService) update(ctx *gin.Context) {
	body := UpdateTaskCommand{}
	easyjson.UnmarshalFromReader(ctx.Request.Body, &body)
	res, err := p.app.Update(
		ctx,
		&body,
	)
	if err != nil {
		return
	}
	ctx.Status(200)
	easyjson.MarshalToHTTPResponseWriter(
		res,
		ctx.Writer,
	)
}

// update state of existing task to progress
func (p *taskService) progress(ctx *gin.Context) {
	body := ProgressTaskCommand{}
	easyjson.UnmarshalFromReader(ctx.Request.Body, &body)
	res, err := p.app.Progress(
		ctx,
		&body,
	)
	if err != nil {
		return
	}
	ctx.Status(200)
	easyjson.MarshalToHTTPResponseWriter(
		res,
		ctx.Writer,
	)
}

// update state of existing task to complete
func (p *taskService) complete(ctx *gin.Context) {
	body := CompleteTaskCommand{}
	easyjson.UnmarshalFromReader(ctx.Request.Body, &body)
	res, err := p.app.Complete(
		ctx,
		&body,
	)
	if err != nil {
		return
	}
	ctx.Status(200)
	easyjson.MarshalToHTTPResponseWriter(
		res,
		ctx.Writer,
	)
}

// query all existing tasks
func (p *taskService) listQuery(ctx *gin.Context) {
	body := ListTasksQuery{}
	easyjson.UnmarshalFromReader(ctx.Request.Body, &body)
	res, err := p.app.ListQuery(
		ctx,
		&body,
	)
	if err != nil {
		return
	}
	ctx.Status(200)
	easyjson.MarshalToHTTPResponseWriter(
		res,
		ctx.Writer,
	)
}
func RegisterTaskServiceHTTPServer(
	grp *gin.RouterGroup,
	srv TaskServiceHTTPServer,
) {
	ctrl := taskService{app: srv}
	grp.POST("/commands/createTask", ctrl.create)
	grp.POST("/commands/deleteTask", ctrl.delete)
	grp.POST("/commands/updateTask", ctrl.update)
	grp.POST("/commands/progressTask", ctrl.progress)
	grp.POST("/commands/completeTask", ctrl.complete)
	grp.POST("/queries/listTasks", ctrl.listQuery)
}

// QuoteService
type QuoteServiceHTTPServer interface {
	// Get a quote
	Get(context.Context, *GetQuoteQuery) (*QuoteData, error)
}
type quoteService struct {
	app QuoteServiceHTTPServer
}

// get a random quote
func (p *quoteService) get(ctx *gin.Context) {
	body := GetQuoteQuery{}
	easyjson.UnmarshalFromReader(ctx.Request.Body, &body)
	res, err := p.app.Get(
		ctx,
		&body,
	)
	if err != nil {
		return
	}
	ctx.Status(200)
	easyjson.MarshalToHTTPResponseWriter(
		res,
		ctx.Writer,
	)
}
func RegisterQuoteServiceHTTPServer(
	grp *gin.RouterGroup,
	srv QuoteServiceHTTPServer,
) {
	ctrl := quoteService{app: srv}
	grp.POST("/queries/getQuote", ctrl.get)
}
